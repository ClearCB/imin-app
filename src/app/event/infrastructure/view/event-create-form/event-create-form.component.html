<div class="grid  p-fluid">

    <div class="card col-12">
        <form [formGroup]="eventForm">

            <div class="grid">

                <div class="col-12">

                    <div class="col-12 flex flex-row justify-content-around">
                        <h3>EVENT</h3>
                        <!-- <a [routerLink]="eventDetailUrl">Ir a evento</a> -->
                        @if (imageSrc) {
                            <p-image [src]="imageSrc" height="150" alt="Image" />
                        }
                        @if (event && event.id) {
                            <app-custom-file (uploadedFile)="handleUploadedFile()" [eventId]="event.id" ></app-custom-file>
                        }
                    </div>


                    <div class="col-12">
                        <div class="grid ">
                            <div class="col-4">
                                <label for="username">Title</label>
                                <input formControlName="title" pInputText type="text" class="form-control"
                                    aria-describedby="usernameHelp">
                            </div>
                            <div class="col-8 p-">
                                <label class="form-label">Small description</label>
                                <input formControlName="smallDescription" pInputText type="text" class="form-control"
                                    >
                            </div>
                        </div>
                    </div>

                    <div class="col-12">
                        <label for="float-input">Summary</label>
                        <textarea id="float-input" rows="5" cols="30" formControlName="largeDescription" pInputTextarea
                            [autoResize]="true">
                        </textarea>
                    </div>


                    <div class="col-12">
                        <div class="flex flex-row justify-content-around">
                            <label>Start date</label>
                            <p-calendar formControlName="startDate" [touchUI]="true"  [showTime]="true" [hourFormat]="'24'" />
                            <label>Finish date</label>
                            <p-calendar formControlName="finishDate" [touchUI]="true"  [showTime]="true" [hourFormat]="'24'" />
                        </div>
                    </div>


                    <div class="col-12">

                        <div class="grid">
                            @for (category of event?.categories; track $index) {
                            <p-chip class="col-6" [label]="category.name"></p-chip>
                            }
                        </div>

                    </div>

                    <div class="col-12">
                        <div class="flex flex-column gap-2">
                            <label class="form-label">Is online</label>
                            <p-checkbox formControlName="isOnline" [binary]="true" inputId="ny"></p-checkbox>
                        </div>
                    </div>

                    <div class="col-12 flex flex-column gap-2">
                        <label for="category">Category</label>
                        <p-dropdown optionLabel="name" [options]="categories" formControlName="category"
                            placeholder="Select a City" />
                    </div>

                </div>

                <div class="card col-12">

                    <h1>Location</h1>
                    <label class="form-label">Name</label>
                    <input pInputText formControlName="locationName" type="text" class="form-control mb-6" />

                    <div class=" side-map-container">
                        <app-custom-map [category]="category.value" [events]="events" [isCreateFormEvent]="isCreateFormEvent" (mapClickedEmiter)="handleMapClicked($event)"
                            [style]="{height:'50vh'}"></app-custom-map>
                    </div>

                </div>


            </div>
        </form>


    </div>


    <div class="col-12 flex flex-column row-gap-3 justify-content-center align-items-center">
        <button type="submit" pButton pRipple (click)="handleSubmit()" class="p-button-primary">Submit</button>
    </div>

</div>